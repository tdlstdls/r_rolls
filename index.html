<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rare Gacha Rolls</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header-row">
            <h1>Rare Gacha Rolls</h1>
            <div class="header-actions">
                <button id="toggle-description" class="secondary" onclick="toggleDescription()">概要を表示</button>
        
                <button id="mode-toggle-btn" class="secondary" onclick="toggleAppMode()">SIMモードへ（未実装）</button>
                <button id="toggle-schedule-btn" class="secondary" onclick="toggleSchedule()">スケジュールを表示</button>
            </div>
        </div>

        <div id="description-content" class="description-box hidden">
            <p><strong>Seed:</strong> ガチャの初期シード値（開始前シード値）を入力してください。<br>
            <strong>Simulation Config:</strong> ガチャを回す手順を「ガチャID ロール数」で指定します。(例: 1006 4 942 11g)<br>
       
            数値のみは単発、数値+gは確定ガチャ(11連など)を示します。</p>
        </div>
        
        <div id="main-controls" class="controls" style="display: flex; flex-wrap: wrap; align-items: center; gap: 20px;">
            <div class="control-group" style="margin-bottom: 0; display: flex; align-items: center;">
                <span id="seed-input-trigger" style="cursor: pointer; text-decoration: underline; color: #007bff; font-weight: bold; font-size: 0.8em;" onclick="showSeedInput()">SEED入力</span>
                <span id="seed-input-container" class="hidden">
                    <label for="seed">Seed:</label>
                    <input type="number" id="seed" placeholder="Enter Seed" value="12345" onkeydown="if(event.key==='Enter') applySeedInput()">
                    <button onclick="applySeedInput()" class="secondary" style="margin-left: 5px; padding: 2px 8px; font-size: 0.9em;">更新</button>
                </span>
            </div>
            
            <div class="control-group hidden" id="sim-control-wrapper" style="margin-bottom: 0; display: flex; align-items: center;">
                <label for="sim-config">Simulation Config:</label>
                <input type="text" id="sim-config" placeholder="e.g. 1006 4 942 11g" onchange="updateUrlParams(); resetAndGenerateTable();">
                <button onclick="clearSimConfig()" style="margin-left: 5px;">Clear</button>
            </div>

            <div style="display: flex; gap: 5px;">
                <button id="toggle-master-info-btn" class="secondary" onclick="toggleMasterInfo()">ガチャマスター情報を表示</button>
                <button id="toggle-find-info-btn" class="secondary" onclick="toggleFindInfo()">Findを表示</button>
            </div>
        </div>

        <div id="master-info-container" class="description-box hidden" style="font-size: 0.85em; line-height: 1.4; word-break: break-all;"></div>

        <div id="result" class="result-box hidden"></div>
        
        <div id="rolls-table-container"></div>

        <div id="bottom-controls" class="bottom-controls" style="margin-top: 10px; margin-bottom: 20px; display: flex; gap: 10px;">
            <button onclick="addMoreRolls()">100行追加</button>
            <button id="toggle-seed-btn" class="secondary" onclick="toggleSeedColumns()">SEEDを表示</button>
        </div>
        
        <div id="schedule-container" class="hidden"></div>
    </div>

    <script src="cats.js"></script>
    <script src="gacha_series.js"></script>
    <script src="limited_cats.js"></script>
    <script src="logic.js"></script>
    <script src="simulation.js"></script>
    <script src="schedule_logic.js"></script>
    <script src="data_loader.js"></script> 
 
    <script src="url_manager.js"></script>
    <script src="gacha_selector.js"></script>

    <script src="view_forecast.js"></script>
    <script src="view_master.js"></script>
    <script src="view_table.js"></script>

    <script src="ui_controller.js"></script>
    
    <script src="main.js"></script>
</body>
</html>